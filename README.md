# LazyLogin

一个 Fabric 服务器端 Mod。主要适用于离线服务器。提供了登录功能，并优化了白名单功能和玩家数据管理。

登录的相关功能参考了这个仓库的代码：[login](https://github.com/Londiuh/login) 。原仓库的许可证文件名为 `LICENSE_login`。

## 功能简介

- 玩家必须先注册、登录才能进行游戏。登录前，玩家不能与世界交互且处于无敌状态。
- 服务器通过识别玩家的**用户名**来实现白名单和玩家数据管理（而不是 UUID）。

此外：

- 增加 `/whitelist safe-add` 指令，进一步保护服务器安全。
- 服务器根据玩家的用户名，把密码的哈希值记录在 `registered-players.json` 中（而不是明文，更安全）。
- 可以通过修改 `.jar` 内 `/assets/lazylogin/lang.json` 自定义文本，或者翻译成其他语言 。

功能细节见下节介绍。

## 命令指南

### `/register <密码> <确认密码>`

玩家通过此命令来注册，且注册后玩家将处于登录状态。命令运行后，服务器将保存密码的 SHA-256 摘要记录在 `registered-players.json` 中。

例子：
```
/register q8EE92s q8EE92s
```



### `/login <密码>`

玩家通过此命令来登录。



### `/password ...`

#### `...change <旧密码> <新密码> <确认密码>`

玩家通过此命令来更改密码。

---

以下命令需要拥有 `op` 权限（权限等级至少为 `3`）：

#### `...reset <玩家>`

重置该玩家的密码为随机密码。

#### `...reload`

重新加载 `registered-players.json`，通常在手动修改该文件后使用。

####  `...list`

列出所有已注册的玩家，也列出在白名单（及 op 列表）却未注册的玩家。



### `/whitelist safe-add <玩家>`

先为该玩家注册，赋予其一个初始的随机密码，再将其加入白名单。用于替代 `/whitelist add`，提供更好的服务器安全保障。